# Используем официальный образ Go
FROM golang:1.24.3

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файлы go.mod и go.sum для предварительной загрузки зависимостей
COPY go.mod go.sum ./
RUN go mod download

# Копируем все исходники в контейнер
COPY . .

# Собираем бинарник из директории cmd
RUN go build -o shortLink ./cmd

# Указываем порт, который будет слушать приложение
EXPOSE 8081

# Команда по умолчанию
CMD ["./shortLink"]